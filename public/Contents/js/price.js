$(document).ready(function(){var ddlEduationalLevel=$("[id$=drEduationalLevel]");var ddlProduct=$("[id$= drproduct]");var ddlDeadline=$("[id$=drDeadline]");var ddlStandard=$("[id$=drStandard]");var ddlPages=$("[id$=drPages]");var hidProduct=$("[id$=hidProduct]");var hidDeadline=$("[id$=hidDeadline]");var hidStandard=$("[id$=hidStandard]");var hidPages=$("[id$=hidNoofPages]");var hidPrice=$("[id$=hidprice]");var lblPrice=$("[id$=lblTotalPrice]");var lblDisc=$("[id$=lblDiscount]");var ajaxUrlForEducation='dropdowns.asmx/GetAllProductByEducationID';var ajaxUrlForProduct='dropdowns.asmx/GetDeadlines';var ajaxUrlForStandard='dropdowns.asmx/GetStandards';var ajaxUrlForPages='dropdowns.asmx/GetPages';var ajaxUrlForPrice='dropdowns.asmx/GetPrice';ddlEduationalLevel.bind('change',ddlEduationalLevelChange);ddlProduct.bind('change',ddlProductChange);ddlDeadline.bind('change',ddlDeadlineChange);ddlStandard.bind('change',ddlStandardChange);ddlPages.bind('change',ddlPagesChange);function ddlEduationalLevelChange(){hidProduct.val('');hidDeadline.val('');hidPrice.val('');hidPages.val('');hidStandard.val('');doAjaxCall(ajaxUrlForEducation,'{edulevelid: '+ddlEduationalLevel.val()+'}',EducationalSuccessHandler);}function ddlProductChange(){hidProduct.val(this.value);hidDeadline.val('');doAjaxCall(ajaxUrlForProduct,'{productid: '+ddlProduct.val()+'}',ProductSuccessHandler);}function ddlDeadlineChange(){hidDeadline.val(this.value);if(hidStandard.val!=''&&hidPrice.val!=''){hidPrice.val('');doAjaxCall(ajaxUrlForStandard,'{productid: '+ddlProduct.val()+'}',StandardSuccessHandler);}else{hidPages.val('');hidStandard.val('');doAjaxCall(ajaxUrlForStandard,'{productid: '+ddlProduct.val()+'}',StandardSuccessHandler);}}function ddlStandardChange(){hidStandard.val(this.value);if(hidPrice.val!=''&&hidPages.val!=''){hidPrice.val('');doAjaxCall(ajaxUrlForPages,'{deadline: '+ddlDeadline.val()+'}',PageSuccessHandler);}else{hidPages.val('');doAjaxCall(ajaxUrlForPages,'{deadline: '+ddlDeadline.val()+'}',PageSuccessHandler);}}function ddlPagesChange(){hidPages.val(this.value);hidPrice.val('');doAjaxCall(ajaxUrlForPrice,'{deadline: '+ddlDeadline.val()+', productid: '+ddlProduct.val()+', standard: '+ddlStandard.val()+', nopage: '+ddlPages.val()+'}',PriceSuccessHandler);}if(ddlEduationalLevel.val()!='---Select---'){doAjaxCall(ajaxUrlForEducation,'{edulevelid: '+ddlEduationalLevel.val()+'}',EducationalSuccessHandler);}function doAjaxCall(url,data,successHandler){$.ajax({type:'POST',url:url,data:data,contentType:'application/json; charset=utf-8',dataType:'json',success:function(response){successHandler(response);}});}function EducationalSuccessHandler(response){var states=(typeof response.d)=='string'?eval('('+response.d+')'):response.d;ddlProduct.find('option').remove();ddlDeadline.find('option').remove();ddlProduct.attr('disabled',false).append($('<option></option>').attr('value',0).text('--Select--'));var doc=$('<div></div>');for(var i=0;i<states.length;i++){doc.append($('<option></option>').attr('value',states[i].productid).text(states[i].productname));}ddlProduct.append(doc.html());doc.remove();ddlProduct.val(hidProduct.val());if(ddlProduct.val()!='---Select---'){doAjaxCall(ajaxUrlForProduct,'{productid: '+ddlProduct.val()+'}',ProductSuccessHandler);}}function ProductSuccessHandler(response){var metros=(typeof response.d)=='string'?eval('('+response.d+')'):response.d;ddlDeadline.find('option').remove();ddlDeadline.attr('disabled',false).append($('<option></option>').attr('value',0).text('--Select--'));var doc=$('<div></div>');for(var i=0;i<metros.length;i++){doc.append($('<option></option>').attr('value',metros[i].deadlineid).text(metros[i].deadlinediscription));}ddlDeadline.append(doc.html());doc.remove();ddlDeadline.val(hidDeadline.val());if(ddlDeadline.val()!='---Select---'){doAjaxCall(ajaxUrlForStandard,'{productid: '+ddlDeadline.val()+'}',StandardSuccessHandler);}if(ddlDeadline.val()!='---Select---'&&ddlProduct.val()!='---Select---'&&ddlStandard.val()!='---Select---'&&ddlPages.val()!='---Select---'){doAjaxCall(ajaxUrlForPrice,'{deadline: '+ddlDeadline.val()+', productid: '+ddlProduct.val()+', standard: '+ddlStandard.val()+', nopage: '+ddlPages.val()+'}',PriceSuccessHandler);}}function StandardSuccessHandler(response){var standards=(typeof response.d)=='string'?eval('('+response.d+')'):response.d;ddlStandard.find('option').remove();ddlStandard.attr('disabled',false).append($('<option></option>').attr('value',0).text('--Select--'));var doc=$('<div></div>');for(var i=0;i<standards.length;i++){doc.append($('<option></option>').attr('value',standards[i].standardid).text(standards[i].standard1));}ddlStandard.append(doc.html());doc.remove();ddlStandard.val(hidStandard.val());if(ddlDeadline.val()!='---Select---'){doAjaxCall(ajaxUrlForPages,'{deadline: '+ddlDeadline.val()+'}',PageSuccessHandler);}if(ddlDeadline.val()!='---Select---'&&ddlProduct.val()!='---Select---'&&ddlStandard.val()!='---Select---'&&ddlPages.val()!='---Select---'){doAjaxCall(ajaxUrlForPrice,'{deadline: '+ddlDeadline.val()+', productid: '+ddlProduct.val()+', standard: '+ddlStandard.val()+', nopage: '+ddlPages.val()+'}',PriceSuccessHandler);}}function PageSuccessHandler(response){var pages=(typeof response.d)=='string'?eval('('+response.d+')'):response.d;ddlPages.find('option').remove();ddlPages.attr('disabled',false).append($('<option></option>').attr('value',0).text('--Select--'));var doc=$('<div></div>');for(var i=0;i<pages.length;i++){doc.append($('<option></option>').attr('value',pages[i].pageId).text(pages[i].noofpages));}ddlPages.append(doc.html());doc.remove();ddlPages.val(hidPages.val());if(ddlDeadline.val()!='---Select---'){doAjaxCall(ajaxUrlForPrice,'{deadline: '+ddlDeadline.val()+', productid: '+ddlProduct.val()+', standard: '+ddlStandard.val()+', nopage: '+ddlPages.val()+'}',PriceSuccessHandler);}}function PriceSuccessHandler(response){lblPrice.html(response.d);hidPrice.val(response.d);}});